(this["webpackJsonpjour-15"]=this["webpackJsonpjour-15"]||[]).push([[0],{28:function(t,e,n){},29:function(t,e,n){"use strict";n.r(e);var c=n(1),o=n(5),s=n.n(o),i=n(2),a=n(3),l=n(6),r=n.n(l),u=n(7),d=n.n(u),j=n(0);function b(t){var e=t.data,n=t.onDelete;return Object(j.jsx)("div",{className:"card",onClick:function(){n(e._id)},children:Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("p",{className:"card-text",children:Object(j.jsx)(d.a,{children:e.content})}),Object(j.jsx)("blockquote",{className:"blockquote mb-0",children:Object(j.jsx)("footer",{className:"blockquote-footer",children:Object(j.jsxs)("small",{className:"text-muted",children:["Post\xe9 le ",Object(j.jsx)("cite",{title:"Date de publication",children:Object(j.jsx)(r.a,{format:"DD/MM \xe0 HH:mm",children:e.postDate})})]})})})]})})}function f(t){var e=t.onPost,n=Object(c.useState)(""),o=Object(i.a)(n,2),s=o[0],l=o[1],r=Object(c.useState)(!1),u=Object(i.a)(r,2),d=u[0],b=u[1];return Object(j.jsx)("form",{className:"mb-3",onSubmit:function(t){if(t.preventDefault(),!(""===s||s.length>300)){if(s.includes("!"))return e(s),void l("");b(!0),Object(a.addPost)(s,(function(t){t&&(e(),l("")),b(!1)}))}},children:Object(j.jsx)("fieldset",{disabled:d,children:Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[Object(j.jsxs)("label",{className:"mb-0 font-weight-bold mt-2",htmlFor:"post-content",children:["Contenu \xe0 poster | ",s.length," sur 300"]}),Object(j.jsx)("button",{className:"btn btn-success btn-sm",disabled:""===s,children:"Poster"})]}),Object(j.jsx)("textarea",{name:"content",maxLength:300,className:"form-control",placeholder:"Saisissez votre post",id:"post-content",rows:"3",onChange:function(t){l(t.target.value)},value:s})]})})})}n(27),n(28);var h=function(){var t=Object(c.useState)([]),e=Object(i.a)(t,2),n=e[0],o=e[1],s=Object(c.useState)(!1),l=Object(i.a)(s,2),r=l[0],u=l[1];Object(c.useEffect)((function(){d()}),[]);var d=function(t){t&&"!delete"===t?u(!r):Object(a.getPosts)((function(t){t&&o(t.reverse())}))},h=function(t){r&&Object(a.deletePost)(t,(function(){d()}))};return Object(j.jsxs)("div",{className:"container mb-5",children:[Object(j.jsx)(f,{onPost:d}),Object(j.jsx)("hr",{}),Object(j.jsx)("div",{className:"card-columns ".concat(r&&"delete"),children:n.map((function(t){return Object(j.jsx)(b,{data:t,onDelete:h},t._id)}))})]})};s.a.render(Object(j.jsx)(h,{}),document.getElementById("root"))},3:function(t,e){var n="https://post-public.netlify.app/.netlify/functions/post";e.getPosts=function(t){fetch(n).then((function(t){if(200===t.status)return t.json()})).then((function(e){t(e)})).catch((function(e){t(!1),console.log(e)}))},e.addPost=function(t,e){fetch(n,{method:"POST",body:JSON.stringify({content:t})}).then((function(t){return t.json()})).then((function(t){console.log(t),e(t)})).catch((function(t){e(!1),console.log(t)}))},e.deletePost=function(t,e){fetch(n,{method:"POST",body:JSON.stringify({id:t,mode:"delete"})}).then((function(t){return t.json()})).then((function(t){console.log(t),e(t)})).catch((function(t){e(!1),console.log(t)}))}}},[[29,1,2]]]);
//# sourceMappingURL=main.6dc4be93.chunk.js.map